---
description: Best practices for Next.js applications and routing
globs: *.tsx,*.ts
alwaysApply: false
---

- Utilize Next.js App Router and Server Actions features (13+) for improved performance and security
- Implement proper error handling with `error.tsx` and `not-found.tsx` for better user experience
- Use `next-safe-action` for secure form submissions and API calls
- Use the `use client` directive for client components to optimize server-side rendering
- Leverage `next-themes` for easy theme management and dark mode support
- Keep Route Handlers thin: handle auth/validation/rate limiting at the edge and delegate business logic to usecases in `src/lib/server/usecases`
- When calling Server Actions from Client Components, prefer using `useActionState` to model loading and expected errors instead of ad-hoc `useState` + `try/catch`
- Avoid mixing new App Router patterns with legacy Pages Router APIs for new features unless there is a strong migration reason
