任务：仓库整体架构评估（从可维护性 / 复用性 / 耦合度三维度出发）
方案：业务流 + 分层混合视角（模块地图 + A/B/C/D 四条主业务流）

上下文要点：
- 技术栈：Next.js App Router + TypeScript + Tailwind + Drizzle ORM + Vitest 等
- 评估范围：src/*, content/, messages/, tests/, 配置与基础设施（排除 .next/, node_modules/ 等）

评估步骤：
1. 全局工程与基础设施扫描
   - 根目录关键文件：AGENTS.md, CLAUDE.md, package.json, tsconfig.json, next.config.ts, drizzle.config.ts, vitest.config.ts, vercel.json 等
   - 非代码资源概览：content/, messages/, public/, scripts/, docs/, tests/

2. 模块地图构建（目录视角）
   - 识别核心模块：src/app, src/components, src/lib, src/hooks, src/stores, src/payment, src/mail, types 等
   - 抽样阅读代表性文件，明确各目录职责（UI / Domain Service / Infra / 适配层）

3. 关键业务流横切分析（A/B/C/D）
   - A：鉴权 / 租户与组织
     - 路由与 API：src/app/(auth)*, src/app/api/auth*, src/middleware* 等
     - 关注点：统一 Auth service / guard、租户解析、UI 与基础设施依赖关系
   - B：订阅计费 & credits / ledger
     - 目录：src/payment, 相关 lib/service, src/app/api/webhooks* 等
     - 关注点：Billing/Credits/ledger 领域服务、Webhook 模块化、对 Stripe/Drizzle 的耦合度
   - C：内容管理 / AI 调用工作流
     - 目录：与内容/工作流/AI 请求相关的 app route 与 lib/service
     - 关注点：AI Client/Gateway、错误与限流控制、UI 与调用逻辑分离程度
   - D：运营后台 / 管理端
     - 目录：src/app/(admin)* 或其他后台路由
     - 关注点：后台作为独立 bounded context、权限模型、与核心模块依赖方向

4. 三大维度综合评估
   - 对主要模块在「可维护性 / 复用性 / 耦合度」上给出定性等级（优/良/一般/薄弱）及证据
   - 汇总系统级问题：领域边界、重复实现、隐式耦合（env/global store 等）
   - 给出中等侵入度的架构建议（抽象统一服务层、重组目录、拆分 God module 等）

5. 报告输出结构
   - 概览：整体评价与关键亮点 / 风险
   - 维度视角：按三大维度汇总发现与典型案例
   - 模块视角：主要模块的三维度等级表
   - 业务流视角：A/B/C/D 每条主流程的问题与建议
   - 改进建议：按优先级排序的 Top N 建议 + 可选执行路线图
